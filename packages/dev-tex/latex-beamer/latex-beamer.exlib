# Copyright 2013 Thomas Witt
# Distributed under the terms of the GNU General Public License v2

require texlive-common

BASE_URI="https://bitbucket.org/rivanvx/beamer"
if ever at_least scm; then
    SCM_REPOSITORY=${BASE_URI}
    require scm-hg
else
    DOWNLOADS="${BASE_URI}/get/version-$(ever replace_all -).tar.bz2 -> ${PNV}.tar.bz2"
fi

SUMMARY="A LaTeX class for producing presentations"
BUGS_TO="pyromaniac@thwitt.de"

HOMEPAGE="${BASE_URI}/wiki/Home"

LICENCES="|| ( LPPL-1.3 ( GPL-2 FDL-1.3 ) )"
SLOT="0"
MYOPTIONS="doc examples"

DEPENDENCIES="
    build:
        app-arch/unzip
    build+run:
        dev-tex/pgf
        dev-tex/xcolor
"


TL_DIR="/usr/share/texmf-site"

latex-beamer_src_unpack() {
    default
    ever is_scm || \
        edo mv "${WORKBASE}"/rivanvx-beamer-* "${WORKBASE}"/${PNV}

}

latex-beamer_src_compile() {
    :
}

latex-beamer_src_install() {
    insinto ${TL_DIR}/tex/latex/beamer
    doins -r base

    emagicdocs
    dodoc doc/licenses/LICENSE
    optionq doc && dodoc -r doc/*
    optionq examples && dodoc -r examples solutions
}

latex-beamer_pkg_postinst() {
    etexmf-update
}

latex-beamer_pkg_postrm() {
    etexmf-update
}

export_exlib_phases src_unpack src_compile src_install pkg_postinst pkg_postrm
